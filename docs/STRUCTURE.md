# Структура проекта Orders

## Обзор

Проект реорганизован в монорепозиторий с четким разделением по платформам. Это обеспечивает:

- ✅ Легкую синхронизацию API между платформами
- ✅ Общую документацию и конфигурации
- ✅ Простоту CI/CD настройки
- ✅ Единое управление зависимостями

## Структура директорий

```
project-root/
├── backend/                    # Go backend сервер
│   ├── cmd/                   # Команды
│   │   └── init_db/          # Инициализация БД
│   ├── internal/              # Внутренние пакеты
│   │   ├── database/         # Работа с БД
│   │   ├── handlers/         # HTTP обработчики
│   │   └── models/           # Модели данных
│   ├── configs/              # Конфигурации
│   ├── main.go               # Точка входа
│   ├── main_simple.go        # Упрощенная версия
│   ├── go.mod                # Go модуль
│   └── go.sum                # Зависимости
│
├── mobile/                    # Мобильные приложения
│   └── android/              # Android приложение
│       ├── app/              # Основное приложение
│       └── OrdersTest/       # Тестовое приложение
│
├── shared/                    # Общие ресурсы
│   ├── api/                  # API спецификации
│   │   └── openapi.yaml     # OpenAPI спецификация
│   └── docs/                 # Общая документация
│       ├── README.md        # Общая документация
│       ├── init_db.sql      # SQL скрипты
│       └── env.example      # Примеры конфигурации
│
├── docs/                      # Документация проекта
│   └── STRUCTURE.md          # Эта документация
│
├── scripts/                   # Общие скрипты
│   └── run.sh               # Скрипт запуска
│
├── README.md                  # Корневая документация
├── .gitignore                 # Исключения Git
└── run.sh                     # Устаревший скрипт
```

## Детальное описание

### Backend (`backend/`)

Go сервер с REST API для управления заказами.

**Ключевые файлы:**
- `main.go` - основной сервер
- `cmd/init_db/main.go` - инициализация БД
- `internal/handlers/` - HTTP обработчики
- `internal/models/` - модели данных
- `internal/database/` - работа с PostgreSQL

**Запуск:**
```bash
cd backend
go mod tidy
go run main.go
```

### Mobile (`mobile/android/`)

Android приложения для работы с API.

**Структура:**
- `app/` - основное приложение (пакет: com.example.orders)
- `OrdersTest/` - тестовое приложение

**Сборка:**
```bash
cd mobile/android
./gradlew assembleDebug
```

### Shared (`shared/`)

Общие ресурсы для всех платформ.

**API спецификации:**
- `shared/api/openapi.yaml` - полная спецификация API
- Используется для генерации клиентского кода
- Синхронизируется между платформами

**Документация:**
- `shared/docs/README.md` - общая документация
- `shared/docs/init_db.sql` - SQL скрипты
- `shared/docs/env.example` - примеры конфигурации

### Scripts (`scripts/`)

Утилиты для разработки и развертывания.

**run.sh** - универсальный скрипт запуска:
```bash
./scripts/run.sh backend    # Запуск backend
./scripts/run.sh android    # Сборка Android
./scripts/run.sh all        # Запуск всего
./scripts/run.sh init-db    # Инициализация БД
```

## Преимущества новой структуры

### 1. Четкое разделение платформ
- Backend код изолирован в `backend/`
- Android код в `mobile/android/`
- Общие ресурсы в `shared/`

### 2. API First подход
- Единая спецификация в `shared/api/openapi.yaml`
- Автоматическая синхронизация между платформами
- Легкое добавление новых платформ

### 3. Общая документация
- Централизованная документация в `shared/docs/`
- Легкое обновление при изменении API
- Единые стандарты для всех платформ

### 4. Упрощенное управление
- Один репозиторий для всего проекта
- Общие скрипты и конфигурации
- Простая настройка CI/CD

## Миграция с предыдущей структуры

### Что изменилось:

1. **Перемещение файлов:**
   - Go файлы → `backend/`
   - Android файлы → `mobile/android/`
   - Конфигурации → `shared/docs/`

2. **Обновление импортов:**
   - `myproject` → `backend`
   - `com.example.orderstest` → `com.example.orders`
   - Обновлены все Go и Java файлы

3. **Новые файлы:**
   - `shared/api/openapi.yaml` - API спецификация
   - `shared/docs/README.md` - общая документация
   - `scripts/run.sh` - скрипт запуска

### Что осталось без изменений:

- Логика приложения
- API endpoints
- Функциональность Android приложения

## Рекомендации по разработке

### 1. API изменения
```bash
# 1. Обновите shared/api/openapi.yaml
# 2. Обновите backend handlers
# 3. Обновите Android клиент
# 4. Обновите документацию
```

### 2. Добавление новых платформ
```bash
# 1. Создайте директорию в mobile/
# 2. Используйте shared/api/openapi.yaml
# 3. Добавьте в scripts/run.sh
```

### 3. Версионирование
- Используйте семантическое версионирование
- Обновляйте версии в `shared/api/openapi.yaml`
- Синхронизируйте версии между платформами

## Следующие шаги

1. **Настройка CI/CD:**
   - GitHub Actions для автоматического тестирования
   - Автоматическая сборка Android приложения
   - Деплой на staging/production

2. **Добавление тестов:**
   - Unit тесты для backend
   - Integration тесты для API
   - UI тесты для Android

3. **Мониторинг:**
   - Логирование запросов
   - Метрики производительности
   - Health checks

4. **Документация:**
   - API документация с примерами
   - Руководство по развертыванию
   - Troubleshooting guide 